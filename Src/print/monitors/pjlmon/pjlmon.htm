
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>PJLmon</TITLE>
</HEAD>
<BODY LINK="#0000ff">

<FONT FACE="Verdana" SIZE=5><H2>PJLMon: Sample Language Monitor</H2>
</FONT><FONT FACE="Verdana" SIZE=2>
<P><span style="color:#FF0000;font-size:10pt;font-family:Arial">[This is preliminary documentation and subject to change.]</span></P>
<H3>SUMMARY</H3> </FONT><FONT FACE="Verdana" SIZE=2><P>
A language monitor provides a full duplex communications path between the print spooler and bi-directional printers that are capable of providing software-accessible status information and adds printer control information, such as commands defined by a printer job language, to the data stream. <P>
PJLMon.dll supports Printer Job Language (PJL) and provides bi-directional communication for PJL printers. <P>

Please refer to the Windows&#174; 2000 DDK documentation for more information about print monitors.<P>
This sample works on both x86 and Alpha platforms and is 64-bit compliant.<P>


<H3>BUILDING THE SAMPLE</H3> </FONT><FONT FACE="Verdana" SIZE=2><P>

The code must be built using the build environment shipped with the DDK. Microsoft&#174; Visual C&#174; must be present on the machine for the sample to build properly, as build will use some header files. Also, both the SDK and the DDK must be installed. <P>
To build the sample, run <b>build</B> from the src\print\monitors\pjlmon directory. The DLL will be placed in the appropriate platform directory (either i386 or Alpha). <P>

A language monitor is installed together with a driver. Its filename must be listed in the printer driver INF file by using a <B>LanguageMonitor</B> entry. 
This entry must be included for every printer driver that controls a printer requiring the use of the language monitor. 
The DDK has an INF sample file in src\print\infs\driver5\oemprint.inf. After the user makes the necessary changes in the INF file to accomodate the driver, it will be necessary to modify the <b>LanguageMonitor</b> entry to specify the desired language monitor the driver will use. For example, LanguageMonitor=Pjlmon.dll for this sample.
<P>

Once built, the sample will produce four binaries: Pjlmon.dll, Pjlmon.lib (an export lib), Pjlmon.exp, and, if the sample is built in a checked environment, Pjlmon.pdb.<P>



<H3>CODE TOUR</H3>
<H4>File Manifest</H4>
</FONT><U><PRE>File&#9;&#9;Description
</U>

Local.h&#9; 	Header for global declarations and function prototypes
Makefile&#9;Generic file for building the code sample
Parsepjl.c&#9;Source module that handles parsing of PJL printer response streams
Parsepjl.h&#9;Header for PARSEPJL.C 
Pjlmon.c&#9;Source module that contains the exported functions
Pjlmon.def&#9;File that list the exported functions
Pjlmon.rc&#9;Resource file for the module
Precomp.h&#9;Header that includes the headers to pre-compile
Pjlmon.htm&#9;Documentation for this sample (this file)
Sources&#9; 	Generic file for building the code sample
Spltypes.h&#9;Header for PJLMON.C 
Util.c&#9; 	The source module for utility routines
</FONT><P ALIGN="CENTER"><A HREF="#top"><FONT FACE="Verdana" SIZE=2>Top of page</FONT></A><FONT FACE="Verdana" SIZE=2> </P></FONT>
<TABLE CELLSPACING=0 BORDER=0 WIDTH=624>
<TR><TD VALIGN="MIDDLE" BGCOLOR="#00ffff" HEIGHT=2>
<P></TD>
</TR>
</TABLE>

<FONT FACE="MS Sans Serif" SIZE=1><P>&copy; 1999 Microsoft Corporation</FONT><FONT FACE="Verdana" SIZE=2> </P></FONT></BODY>
</HTML>
